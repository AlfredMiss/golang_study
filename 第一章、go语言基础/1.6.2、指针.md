# 1.6.2、指针


### 什么是指针

当我们定义一个变量 name
```
var name string = "Go指针"
```
此时，`name` 是变量名，它只是编程语言中方便程序员编写和理解代码的一个标签。

当我们访问这个标签时，机算机会返回给我们它指向的内存地址里存储的值：Go指针。

出于某些需要，我们会将这个内存地址赋值给另一个变量名，通常叫做 `ptr（pointer的简写）`，而这个变量，我们称之为指针变量。

换句话说，指针变量（一个标签）的值是指针，也就是内存地址。默认值为 nil ，使用 & 取变量地址，放到一个变量前使用就会返回相应变量的内存地址。通过 * 访问目标对象。

根据变量指向的值，是否是内存地址，我把变量分为两种：

- 普通变量：存数据值本身
- 指针变量：存值的内存地址

不像 Java 和 .NET，Go 语言为程序员提供了控制数据结构的指针的能力；但是，不能进行指针运算。通过给予程序员基本内存布局，Go 语言允许控制特定集合的数据结构、分配的数量以及内存访问模式，这些对构建运行良好的系统是非常重要的：指针对于性能的影响是不言而喻的，而如果想要做的是系统编程、操作系统或者网络应用，指针更是不可或缺的一部分。

程序在内存中存储它的值，每个内存块（或字）有一个地址，通常用十六进制数表示，如：`0x6b0820` 或 `0xf84001d7f0`。




### 指针的创建

指针创建有三种方法

#### 第一种方法

先定义对应的变量，再通过变量取得内存地址，创建指针
```
// 定义普通变量
aint := 1
// 定义指针变量
ptr := &aint
```

#### 第二种方法

先创建指针，分配好内存后，再给指针指向的内存地址写入对应的值。
```
// 创建指针
astr := new(string)
// 给指针赋值
*astr = "Go指针"
```

#### 第三种方法

先声明一个指针变量，再从其他变量取得内存地址赋值给它
```
aint := 1
var bint *int  // 声明一个指针
bint = &aint   // 初始化
```
上面的三段代码中，指针的操作都离不开这两个符号：
- & ：从一个普通变量中取得内存地址
- \*：当*在赋值操作值的右边，是从一个指针变量中取得变量值，当*在赋值操作值的左边，是指该指针指向的变量

通过下面这段代码，就可以熟悉这两个符号的用法
```
package main

import "fmt"

func main() {
    aint := 1     // 定义普通变量
    ptr := &aint  // 定义指针变量
    fmt.Println("普通变量存储的是：", aint)
    fmt.Println("普通变量存储的是：", *ptr)
    fmt.Println("指针变量存储的是：", &aint)
    fmt.Println("指针变量存储的是：", ptr)
}
```
输出如下
```
普通变量存储的是： 1
普通变量存储的是： 1
指针变量存储的是： 0xc0000100a0
指针变量存储的是： 0xc0000100a0
```
要想打印指针指向的内存地址，方法有两种
// 第一种
`fmt.Printf("%p", ptr)`

// 第二种
`fmt.Println(ptr)`

